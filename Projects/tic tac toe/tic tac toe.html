<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tie Tac Toe Game</title>
    <style>


        button{
            width: 50px;
            height: 50px;
            margin: 0px;
            justify-content: center;
            align-items: center;
        }

        .main-div > div{
            display: flex;
        }

        .main-div{
            display: flex;
            flex-direction: column;
            
        }

        img{
            width: 25px;
        }
    </style>
</head>

<body>
    <div class="main-div">
        <div>
            <button class="js-button js-button-0" onclick="userPlay(0)"></button>
            <button class="js-button js-button-1" onclick="userPlay(1)"></button>
            <button class="js-button js-button-2" onclick="userPlay(2)"></button>
        </div>

        <div>
            <button class="js-button js-button-3" onclick="userPlay(3)"></button>
            <button class="js-button js-button-4" onclick="userPlay(4)"></button>
            <button class="js-button js-button-5" onclick="userPlay(5)"></button>
        </div>

        <div>
            <button class="js-button js-button-6" onclick="userPlay(6)"></button>
            <button class="js-button js-button-7" onclick="userPlay(7)"></button>
            <button class="js-button js-button-8" onclick="userPlay(8)"></button>
        </div>

    </div>

    <div class="js-result"></div>




<script>
    let playersMoves = ['', '', '', '', '', '', '', '', '', ]
    let totalMoves = 0;
    //// Event lister for User play
    ///// User play /////
    function userPlay (caseNumber){
            const buttonElement = document.querySelector(`.js-button-${caseNumber}`)
            buttonElement.innerHTML=`<img src="images/circle.png" alt="" class="${caseNumber}" id="circle">`
            playersMoves[caseNumber] = 0,
            totalMoves++
            CheckResults()
            botPlay()
        };


    ///// Bot play ////////////////////////////////////
    function botPlay(){
        let total = 9;
        playersMoves.forEach(move =>{
            if (total>1){
                if (move===1 || move===0){
                    total--
                    console.log(total)
                } 
                else if (total===1){
                    alert("TIE")
                    return
                }

            }   
        })
        const randomNumber = Math.random();
        let botMove = Math.floor(randomNumber*9)
        //show botplay on html
        let botPlayElement = document.querySelector(`.js-button-${botMove}`)
        
        if (botPlayElement.innerHTML===''){
            botPlayElement.innerHTML = `<img src="images/cross.jpg" alt="" class="${botMove}" id="cross">`
            playersMoves[botMove] = 1;
            totalMoves++
        } 

        else{
            console.log('already taken')
            botPlay()
        }
        CheckResults()
        
    }


    ///// Rules using switch///////////////////////////
    // we can use a list to optimize
    
    function CheckResults(){
        // Check if its a tie
        let total = 9;
        playersMoves.forEach(move =>{
            if (total>1){
                if (move===1 || move===0){
                    total--
                    console.log(total)
                } 
                else if (total===1){
                    alert("TIE")
                    return
                }

            }   
        })

        /// case 0 possibilities /////////////////////////
        if (playersMoves[0]===playersMoves[1] && playersMoves[0]===playersMoves[2]){
            if (playersMoves[0]===0 && playersMoves[1]===0 && playersMoves[2]===0){
                document.querySelector('.js-result').innerHTML= 'You won';
                return
            } else if (playersMoves[0]===1 && playersMoves[1]===1 && playersMoves[2]===1){
                document.querySelector('.js-result').innerHTML= 'You lost';
                return
            }
        }

        else if (playersMoves[0]===playersMoves[4] && playersMoves[0]===playersMoves[8]){
            if (playersMoves[0]===0 && playersMoves[4]===0 && playersMoves[8]===0){
                document.querySelector('.js-result').innerHTML= 'You won';
                return
            } else if (playersMoves[0]===1 && playersMoves[0]===1  && playersMoves[8]===1){
                document.querySelector('.js-result').innerHTML= 'You lost';
                return
            }
        }

        else if (playersMoves[0]===playersMoves[3] && playersMoves[0]===playersMoves[6]){
            if (playersMoves[0]===0 && playersMoves[3]===0 && playersMoves[6]===0){
                document.querySelector('.js-result').innerHTML= 'You won';
                return
            } else if (playersMoves[0]===1 && playersMoves[3]===1 && playersMoves[6]===1){
                document.querySelector('.js-result').innerHTML= 'You lost';
                return
            }
        }

        /// case 1 possibility /////////////////////////
        else if (playersMoves[1]===playersMoves[4] && playersMoves[1]===playersMoves[7]){
            if (playersMoves[1]===0 && playersMoves[4]===0 && playersMoves[7]===0){
                document.querySelector('.js-result').innerHTML= 'You won';
                return
            } else if (playersMoves[1]===1 && playersMoves[4]===1 && playersMoves[7]===1){
                document.querySelector('.js-result').innerHTML= 'You lost';
                return
            }
        }

        /// case 2 possibilities /////////////////////////
        else if (playersMoves[2]===playersMoves[4] && playersMoves[2]===playersMoves[6]){
            if (playersMoves[2]===0 && playersMoves[4]===0 && playersMoves[6]===0){
                document.querySelector('.js-result').innerHTML= 'You won';
                return
            } else if (playersMoves[2]===1  && playersMoves[4]===1  && playersMoves[6]===1){
                document.querySelector('.js-result').innerHTML= 'You lost';
                return
            }
        }

        else if (playersMoves[2]===playersMoves[5] && playersMoves[2]===playersMoves[8]){
            if (playersMoves[2]===0 && playersMoves[5]===0 && playersMoves[8]===0){
                document.querySelector('.js-result').innerHTML= 'You won';
                return
            } else if (playersMoves[2]===1 && playersMoves[5]===1 && playersMoves[8]===1){
                document.querySelector('.js-result').innerHTML= 'You lost';
                return
            }
        }

        /// case 3 possibility /////////////////////////
        else if (playersMoves[3]===playersMoves[4] && playersMoves[3]===playersMoves[5]){
            if (playersMoves[3]===0 && playersMoves[4]===0 && playersMoves[5]===0){
                document.querySelector('.js-result').innerHTML= 'You won';
                return
            } else if (playersMoves[3]===1 && playersMoves[4]===1 && playersMoves[5]===1){
                document.querySelector('.js-result').innerHTML= 'You lost';
                return
            }
        }

        /// case 6 possibility /////////////////////////
        else if (playersMoves[6]===playersMoves[7] && playersMoves[6]===playersMoves[8]){
            if (playersMoves[6]===0 && playersMoves[7]===0 && playersMoves[8]===0){
                document.querySelector('.js-result').innerHTML= 'You won';
                return
            } else if (playersMoves[6]===1 && playersMoves[7]===1 && playersMoves[8]===1){
                document.querySelector('.js-result').innerHTML= 'You lost';
                return
            }
        } 
        

        
    } 
    
    /////// Check Tie ////////////////////////////////////////
    function checkTie(){
        let plays = 0;
        const buttonElement = document.querySelectorAll(`.js-button`);
        buttonElement.forEach(button => {
            if (button.innerHTML){
                plays++;
                
                if (plays===8){
                    return
                }
            }
            console.log(plays)
        }); 
    }

    /////// Clear all img ///////////////////////////////////]
    document.querySelectorAll('.js-button')

</script>
</body>
</html>